{% from "_form_helpers.html" import render_field %}
{% extends "base.html" %}
{% block page_title %}Create title{% endblock %}
{% block content %}
  {% if created %}
    {# We are not using flash() here, as we need to render some HTML, and don't want to leave the door open to XXS attacks) #}
    <div class="alert alert-info" role="alert">
        New title created, <a href="{{property_frontend_url}}/{{created}}">view public property page</a>
    </div>

  {% endif %}
  <div class="row">
    <div class="col-md-12">
      <h1>Create title</h1>

      <form action="" method="POST">

        {{ form.csrf_token }}{{form.hidden_tag()}}
        <!--{{ render_field(form.title_number)}}-->

        <p>Reference: <strong>{{title_number}}</strong></p>

        <fieldset>
        <legend>Proprietors</legend>
        {{ render_field(form.first_name1) }}
        {{ render_field(form.surname1) }}
        {{ render_field(form.first_name2) }}
        {{ render_field(form.surname2) }}
        </fieldset>

        <fieldset>
        <legend>Property Address</legend>
        {{ render_field(form.house_number)}}
        {{ render_field(form.road)}}
        {{ render_field(form.town)}}
        {{ render_field(form.postcode)}}
        </fieldset>

        <fieldset>
        <legend>Tenure</legend>
        {{ render_field(form.property_tenure)}}
        </fieldset>

        <fieldset>
        <legend>Class of title</legend>
        {{ render_field(form.property_class)}}
        </fieldset>

        <fieldset>
        <legend>Price Paid</legend>
        {{ render_field(form.price_paid)}}
        </fieldset>

        <fieldset>
        <legend>Extent Geometry</legend>
        {# render_field(form.geom_type) #}
        {{ render_field(form.extent) }}
        {# render_field(form.crs) #}
        </fieldset>

        <form action="/addCharge" method="POST">
            <fieldset>
            <legend>Charges</legend>

                {{ render_field(charge_form.chargee_name) }}
                {{ render_field(charge_form.charge_date) }}
                {{ render_field(charge_form.chargee_line1) }}
                {{ render_field(charge_form.chargee_town) }}
                {{ render_field(charge_form.chargee_postcode) }}
                {{ render_field(charge_form.chargee_country) }}

            </fieldset>

            <button type="submit" id="addCharge" class="btn btn-default btn-primary">Add Charge</button>

            <legend>Exising Charges</legend>
            {% for charge in form.charges %}
                <ul>
                    <li> {{charge.chargee_name}} </li>
                </ul>
            {% endfor %}

        </form>

       <button type="submit" id="submit" class="btn btn-default btn-primary">Create title</button>

      </form>
    </div>
  </div>
{% endblock %}
